---
description: 'Install quickstart toolchain'
inputs:
  tools-version-dump:
    description: 'Solana platform-tools version for Rust compilation dumps'
    required: true
  tools-version-test:
    description: 'Solana platform-tools version for Rust compilation tests'
    required: true
  sbpf-cli-revision:
    description: 'sbpf CLI rev (git commit hash, tag, or branch) to install'
    required: true
  solana-version:
    description: 'Solana version to install'
    required: true
name: 'Install toolchain'
outputs:
  platform:
    description: 'Platform identifier (OS-ARCH)'
    value: '${{ steps.set-path-vars.outputs.platform }}'
runs:
  steps:
  - env:
      RUNNER_ARCH: '${{ runner.arch }}'
      RUNNER_OS: '${{ runner.os }}'
    id: 'set-path-vars'
    name: 'Set path variables'
    run: '${{ github.action_path }}/scripts/set-path-vars.sh'
    shell: 'sh'
  - id: 'cache-toolchain'
    name: 'Cache toolchain components'
    uses: 'actions/cache@v4'
    with:
      key: 'solana-opcode-guide-toolchain-${{
            inputs.solana-version }}-${{
            inputs.tools-version-dump }}-${{
            inputs.tools-version-test }}-${{
            inputs.sbpf-cli-revision }}-${{
            env.PLATFORM }}'
      path: |
        ~/.cache/solana
        ~/.cargo/bin/sbpf
        ~/.local/share/solana
  - if: 'steps.cache-toolchain.outputs.cache-hit != ''true'''
    name: 'Install tools'
    run: >-
      ${{ github.action_path }}/scripts/install-tools.sh
      "${{ inputs.solana-version }}"
      "${{ inputs.tools-version-dump }}"
      "${{ inputs.tools-version-test }}"
      "${{ inputs.sbpf-cli-revision }}"
    shell: 'sh'
  - name: 'Verify tools'
    run: '${{ github.action_path }}/scripts/verify-tools.sh'
    shell: 'sh'
  using: 'composite'
...
