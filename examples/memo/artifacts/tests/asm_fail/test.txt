#[test]
fn test_asm_fail() {
    let setup = setup_test(ProgramLanguage::Assembly);

    // Create a mock account that will trigger an error when passed.
    let (account, accounts) = single_mock_account();

    // Verify that the instruction fails with the expected error code.
    setup.mollusk.process_and_validate_instruction(
        &Instruction::new_with_bytes(setup.program_id, b"Whoops", accounts.clone()),
        &[account],
        &[Check::err(ProgramError::Custom(accounts.len() as u32))],
    );
}