#[test]
fn test_input_offsets() {
    const MAX_PERMITTED_DATA_INCREASE: usize = 10240;

    #[allow(dead_code)]
    #[repr(C)]
    struct AccountLayout<const PADDED_DATA_SIZE: usize> {
        non_dup_marker: u8,
        is_signer: u8,
        is_writable: u8,
        is_executable: u8,
        padding: [u8; 4],
        pubkey: [u8; 32],
        owner: [u8; 32],
        lamports: u64,
        data_length: u64,
        data_padded: [u8; PADDED_DATA_SIZE],
        rent_epoch: u64,
    }

    type StandardAccount = AccountLayout<MAX_PERMITTED_DATA_INCREASE>;
    type SystemProgramAccount = AccountLayout<{ MAX_PERMITTED_DATA_INCREASE + 16 }>;

    // Sender.
    const SENDER_OFFSET: usize = 8;
    const SENDER_LAMPORTS_OFFSET: usize = 80;
    const SENDER_DATA_LENGTH_OFFSET: usize = 88;

    // Recipient.
    const RECIPIENT_OFFSET: usize = 10344;
    const RECIPIENT_DATA_LENGTH_OFFSET: usize = 10424;

    // System program.
    const SYSTEM_PROGRAM_OFFSET: usize = 20680;

    // Instruction data.
    const INSTRUCTION_DATA_LENGTH_OFFSET: usize = 31032;
    const INSTRUCTION_DATA_OFFSET: usize = 31040;

    assert_eq!(
        SENDER_LAMPORTS_OFFSET,
        SENDER_OFFSET + offset_of!(StandardAccount, lamports),
    );
    assert_eq!(
        SENDER_DATA_LENGTH_OFFSET,
        SENDER_OFFSET + offset_of!(StandardAccount, data_length),
    );
    assert_eq!(
        RECIPIENT_OFFSET,
        SENDER_OFFSET + size_of::<StandardAccount>()
    );
    assert_eq!(
        RECIPIENT_DATA_LENGTH_OFFSET,
        RECIPIENT_OFFSET + offset_of!(StandardAccount, data_length),
    );
    assert_eq!(
        SYSTEM_PROGRAM_OFFSET,
        RECIPIENT_OFFSET + size_of::<StandardAccount>()
    );
    assert_eq!(
        INSTRUCTION_DATA_LENGTH_OFFSET,
        SYSTEM_PROGRAM_OFFSET + size_of::<SystemProgramAccount>()
    );
    assert_eq!(
        INSTRUCTION_DATA_OFFSET,
        INSTRUCTION_DATA_LENGTH_OFFSET + size_of::<u64>(),
    );
}