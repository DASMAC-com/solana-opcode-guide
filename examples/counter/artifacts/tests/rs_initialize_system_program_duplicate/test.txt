#[test]
fn test_rs_initialize_system_program_duplicate() {
    let (setup, mut instruction, mut accounts, _) =
        happy_path_setup(ProgramLanguage::Rust, Operation::Initialize);

    instruction.accounts[AccountIndex::SystemProgram as usize] =
        instruction.accounts[AccountIndex::User as usize].clone();
    accounts[AccountIndex::SystemProgram as usize] = accounts[AccountIndex::User as usize].clone();

    setup.mollusk.process_and_validate_instruction(
        &instruction,
        &accounts,
        &[
            Check::err(ProgramError::Custom(
                constants().get("E_SYSTEM_PROGRAM_DUPLICATE") as u32,
            )),
            Check::compute_units(Case::InitializeSystemProgramDuplicate.get().rs),
        ],
    );
}